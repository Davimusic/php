<!doctype html>
<html lang="es">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
        <link rel="stylesheet" href="css/IngresoInformacionGenerico.css">
        <link rel="stylesheet" href="css/styleMenu.css"> 
        <title>CRUD MONGODB</title>
        
    </head>
    <body>

        <h1 class="logo">CONTABILIDAD <span>MADRE</span></h1>

        <div class="menuCelular">
            <form method="link" action="/promedios">
                <input class="menuCel" type="submit" value="IR  A PROMEDIOS">
            </form>
        </div>
        
        <div class="contenedorPadre ">
            <div class="item1 " >
                <div class="ingresoInformacion">
                    <div class="shadow-lg pb-3 mb-5 gb-body rounded ">
                        <h4 class="titulo">INFORMACIÓN A INGRESAR</h4>
                        <form action="/crearSalidaDinero" method="POST">
                            <div>
                            <label for="conceptoSalida" class="form-label titulo">CONCEPTO</label>
                            <select class="select" id="conceptoSalida" name="conceptoSalida">
                                <option value="pago banco">pago banco</option> 
                                <option value="pago recibos">pago recibos</option>
                                <option value="comida">comida</option> 
                                <option value="finca">finca</option>
                                <option value="otros">otros</option>
                            </select>
                        </div>
                        <div>
                            <label for="dineroSalida" class="form-label espacio">DINERO A USAR</label>
                            <input class="select" id="dineroSalida" name="dineroSalida" type="number" class="form-control" required>
                        </div>
                        <div>
                            <label for="fechaDineroSalida" class="form-label espacio">FECHA</label>
                            <input class="select" type="date" id="fechaDineroSalida" name="fechaDineroSalida" class="form-control"
                            min="2021-01-01" max="2024-12-31" required>
                        </div>
                        <div>
                            <label for="anotacionOpcionalDineroSalida" class="form-label espacio">ANOTACIÓN OPCIONAL</label>
                            <input class="select " id="anotacionOpcionalDineroSalida" name="anotacionOpcionalDineroSalida" type="text" class="form-control" >
                        </div>
                    </div>        
                        <button type="submit" class="w-100 btn btn-guardar btn-lg"><i class="bi bi-save"></i>REGISTRAR INFORMACIÓN</button>
                    </form>
                </div>
            </div>
            <div class="item2 ">
                <div class="mostrarInformacion ">
                    <div class="minicontenedor">
                        <div class="mini1">
                            <form action="/filtroSalidaDinero" method="POST">
                                <div>
                                    <label for="otroMostrar" class="form-label titulo"></label><h4>BUSQUEDA FILTRADA</h4></label>
                                    <input class="select " id="otroMostrar" name="otroMostrar" type="text" class="form-control" >
                                </div>
                        </div>    
                        <div class="mini2">   
                                <button type="submit" class="disminuirLetra w-100 btn btn-guardar btn-lg"><i class="bi bi-save"></i>FILTRAR INFORMACIÓN</button>
                            </form> 
                        </div>    
                    </div>    
                
                                       
                            <table id="tablaAlumnos" class="table mt-4 ">
                                <thead>
                                        <tr class="tituloTabla">
                                            <th style="display: none;">ID</th>     
                                            <th>CONCEPTO</th>
                                            <th>DINERO A USAR</th>
                                            <th>FECHA</th>
                                            <th>ANOTACIÓN OPCIONAL</th>
                                            <th>ACCIONES</th>
                                        </tr>
                                </thead>
                                <tbody>
                                    <% ingresos.forEach((ingreso) => { %>
                                            <tr>
                                                <td style="display: none;"><%= ingreso.id %></td>
                                                <td><%= ingreso.conceptoSalida %></td>
                                                <td><%= ingreso.dineroSalida %></td>
                                                <td><%= ingreso.fechaDineroSalida %></td>
                                                <td><%= ingreso.anotacionOpcionalDineroSalida %></td>
                                                <td>
                                                    <a type="button" class="btnEditar btn btn-outline-primary bi bi-pencil"></a>
                                                    <a href="/borrar/<%= ingreso._id %>" class="btn btn-outline-danger bi bi-trash"></a>
                                                </td>
                                            </tr>
                                    <% }) %> 
                                </tbody>
                            </table>

                    </div>      
                    
            </div>
            <div class="item3">
                 <!-- para el menu lateral -->
                <div class="navigation">
                    <h4 class="titulo tituloMenu">MENU</h4>
                    <ul>
                        <div class="espacioTituloMenu">
                        </div>
                        <li  class="list">
                            <b></b>
                            <b></b>
                            <a href="/">
                            <span class="icon"></span>
                        <span class="title "><h6>INGRE.</h6></span>
                            </a>
                        </li>
                        <li  class="list">
                            <b></b>
                            <b></b>
                            <a href="/mostrarGananciasExternas">
                            <span class="icon"></span>
                            <span class="title"><h6>GAN EXTER</h6></span>
                            </a>
                        </li>
                        <li  class="list active">
                            <b></b>
                            <b></b>
                            <a href="/mostrarDinerosSalida">
                            <span class="icon"></span>
                            <span class="title"><h6>DINER SAL</h6></span>
                            </a>
                        </li>
                        <li>
                            <span class="title"><h6>------------</h6></span>
                        </li>
                        <li  class="list">
                            <b></b>
                            <b></b>
                            <a href="/mostrarMesAnoSalidaDinero">
                            <span class="icon"></span>
                            <span class="title"><h7>VISTA SAL</h7></span>
                            </a>
                        </li>
                    </ul>
                </div>
            
                <div class="toggle">
                </div>
                
            </div>
        </div>

        <!--modal para editar-->
        <div id="modalAlumno" class="modal fade" tabindex="-1" aria-labelledby="modalAlumno" aria-hidden="true">
            <div class="modal-dialog sombra">
                 <div class="modal-content fondo">
                       <div class="modal-header bg-primary text-white">
                            <h5 class="modal-title" id="exampleModalLabel">EDITAR INFORMACIÓN</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                       </div>
                       <div class="modal-body">
                            <form action="/editarSalidaDinero" method="POST">
                                <input  type="text" name="id_editar" id="id_editar" hidden>
                            <div class="mb-3">
                                <label for="concepto_editar" class="col-form-label">CONCEPTO</label>
                                <select class="select" id="concepto_editar" name="concepto_editar">
                                    <option value="pago banco">pago banco</option> 
                                    <option value="pago recibos">pago recibos</option>
                                    <option value="comida">comida</option> 
                                    <option value="finca">finca</option>
                                    <option value="otros">otros</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="dineroSalida_editar" class="col-form-label">DINERO A USAR</label>
                                <input class="select" id="dineroSalida_editar" name="dineroSalida_editar" type="number" class="form-control" value="">
                            </div> 
                            
                            <div class="mb-3">
                                <label for="fecha_editar" class="col-form-label">FECHA</label>
                                <input class="select" type="date" id="fecha_editar" name="fecha_editar" class="form-control"
                                value="2021-01-01"
                                min="2021-01-01" max="2024-12-31" required>
                            </div>
                            <div class="mb-3">
                                <label for="anotacionOpcional_editar" class="col-form-label">ANOTACIÓN OPCIONAL</label>
                                <input class="select" id="anotacionOpcional_editar" name="anotacionOpcional_editar" type="text" class="form-control" value="">
                            </div>
                       </div>
                       <div class="modal-footer">
                            <button type="submit" class="w-100 btn btn-guardar btn-lg"><i class="bi bi-save"></i>ACTUALIZAR INFORMACIÓN</button>
                       </div>
                    </form> 
                 </div>
            </div>
        </div>

        
        
       
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
        <script src="js/dineroSalida.js"></script>
        
        <!-- Esto es del menu de lateral-->
        <script>
            let menuToggle = document.querySelector('.toggle');
            let navigation = document.querySelector('.navigation');
            menuToggle.onclick = function(){
                menuToggle.classList.toggle('active');
                navigation.classList.toggle('active');
            }
    
            let list = document.querySelectorAll('.list');
            for(let i=0; i<list.length; i++){
                list[i].onclick = function(){
                    let j = 0;
                    while(j < list.length){
                        list[j++].className = 'list';
                    }
                    list[i].className = 'list active';
                }
            }
        </script>
        
      
        
    </body>
</html>